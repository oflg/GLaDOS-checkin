name: GLaDOS Checkin

on:
  schedule:
    # 每天北京时间上午 10:00 (UTC 02:00)
    - cron: '0 2 * * *'
  workflow_dispatch: # 允许手动测试

jobs:
  run-checkin:
    runs-on: ubuntu-latest
    
    steps:
      # 1. 拉取仓库代码
      - name: Checkout Code
        uses: actions/checkout@v3

      # 2. 安装 Python 环境
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      # 3. 安装依赖
      - name: Install Dependencies
        run: |
          pip install -r requirements.txt

      # 4. 运行脚本 (注入 Secrets)
      - name: Run Checkin Script
        env:
          GLADOS_COOKIE: ${{ secrets.GLADOS_COOKIE }}
          TG_TOKEN: ${{ secrets.TG_TOKEN }}
          TG_ID: ${{ secrets.TG_ID }}
        run: python checkin.py
